<?xml version="1.0"?>
<!-- Generated by SolidWorks URDF exporter; mesh paths fixed for Gazebo classic -->
<robot name="allwheel_urdf">

  <!-- ========================= -->
  <!--   Dummy root to avoid KDL root-inertia warning -->
  <!-- ========================= -->
  <link name="base_footprint"/>

  <joint name="base_footprint_to_base_link" type="fixed">
    <origin xyz="0 0 0" rpy="0 0 0"/>
    <parent link="base_footprint"/>
    <child link="base_link"/>
  </joint>

  <!-- ========================= -->
  <!--   Mesh dir via package://  -->
  <!-- ========================= -->
  <!-- MESH_DIR = package://all_wheel_description/meshes -->

  <link name="base_link">
    <inertial>
      <origin xyz="3.2612801348364E-15 2.98274859672487E-15 -0.0102615683558075" rpy="0 0 0"/>
      <mass value="0.255742000192013"/>
      <inertia
        ixx="0.000302796409258888"
        ixy="-3.92027771042362E-19"
        ixz="-1.46296662392844E-19"
        iyy="0.000302202648247359"
        iyz="-9.95263713023803E-20"
        izz="0.000556226204689963"/>
    </inertial>

    <visual>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <mesh filename="package://all_wheel_description/meshes/base_link.STL"/>
      </geometry>
      <material name="">
        <color rgba="0.792156862745098 0.819607843137255 0.933333333333333 1"/>
      </material>
    </visual>

    <collision>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <mesh filename="package://all_wheel_description/meshes/base_link.STL"/>
      </geometry>
    </collision>
  </link>

  <link name="front_link">
    <inertial>
      <origin xyz="0.00291772242218888 -3.96001122382623E-17 3.67729594369733E-17" rpy="0 0 0"/>
      <mass value="0.109903140807102"/>
      <inertia
        ixx="2.82980917306225E-05"
        ixy="7.48060042323109E-22"
        ixz="-1.69854388671089E-21"
        iyy="1.73831765621433E-05"
        iyz="8.36445035413622E-21"
        izz="1.73831765621433E-05"/>
    </inertial>

    <visual>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <mesh filename="package://all_wheel_description/meshes/front_link.STL"/>
      </geometry>
      <material name="">
        <color rgba="0.752941176470588 0.752941176470588 0.752941176470588 1"/>
      </material>
    </visual>

    <collision>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <mesh filename="package://all_wheel_description/meshes/front_link.STL"/>
      </geometry>
    </collision>
  </link>

  <joint name="front_wheel_joint" type="continuous">
    <origin xyz="0.0990025403784439 0 -0.0351150000000006" rpy="0 0 0"/>
    <parent link="base_link"/>
    <child link="front_link"/>
    <axis xyz="1 0 0"/>
  </joint>

  <link name="right_Link">
    <inertial>
      <origin xyz="0.00291772242218893 -1.2490009027033E-16 3.36091510237884E-17" rpy="0 0 0"/>
      <mass value="0.109903140807102"/>
      <inertia
        ixx="2.82980917306225E-05"
        ixy="3.81164826264435E-21"
        ixz="-2.9926600267234E-21"
        iyy="1.73831765621433E-05"
        iyz="1.01781304777338E-20"
        izz="1.73831765621432E-05"/>
    </inertial>

    <visual>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <mesh filename="package://all_wheel_description/meshes/right_Link.STL"/>
      </geometry>
      <material name="">
        <color rgba="0.752941176470588 0.752941176470588 0.752941176470588 1"/>
      </material>
    </visual>

    <collision>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <mesh filename="package://all_wheel_description/meshes/right_Link.STL"/>
      </geometry>
    </collision>
  </link>

  <joint name="right_wheel_joint" type="continuous">
    <origin xyz="-0.0495012701892215 -0.0857387150069273 -0.0351150000000006" rpy="0 0 -2.09439510239319"/>
    <parent link="base_link"/>
    <child link="right_Link"/>
    <axis xyz="1 0 0"/>
  </joint>

  <link name="left_Link">
    <inertial>
      <origin xyz="0.00291772242218896 -8.32667268468867E-17 4.16322471001811E-17" rpy="0 0 0"/>
      <mass value="0.109903140807102"/>
      <inertia
        ixx="2.82980917306225E-05"
        ixy="8.470329472543E-22"
        ixz="-4.04814248834114E-21"
        iyy="1.73831765621433E-05"
        iyz="7.3114989324433E-21"
        izz="1.73831765621432E-05"/>
    </inertial>

    <visual>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <mesh filename="package://all_wheel_description/meshes/left_Link.STL"/>
      </geometry>
      <material name="">
        <color rgba="0.752941176470588 0.752941176470588 0.752941176470588 1"/>
      </material>
    </visual>

    <collision>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <mesh filename="package://all_wheel_description/meshes/left_Link.STL"/>
      </geometry>
    </collision>
  </link>

  <joint name="left_wheel_joint" type="continuous">
    <origin xyz="-0.049501270189222 0.085738715006927 -0.0351150000000006" rpy="0 0 2.0943951023932"/>
    <parent link="base_link"/>
    <child link="left_Link"/>
    <axis xyz="1 0 0"/>
  </joint>

  <gazebo reference="front_link">
    <mu1>3.0</mu1>
    <mu2>0.3</mu2>
    <fdir1>0 1 0</fdir1>
  </gazebo>

  <gazebo reference="right_Link">
    <mu1>3.0</mu1>
    <mu2>0.3</mu2>
    <fdir1>0 1 0</fdir1>
  </gazebo>

  <gazebo reference="left_Link">
    <mu1>3.0</mu1>
    <mu2>0.3</mu2>
    <fdir1>0 1 0</fdir1>
  </gazebo>

  <link name="lidar_link">
    <inertial>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <mass value="0.05"/>
      <inertia ixx="1e-05" ixy="0" ixz="0" iyy="1e-05" iyz="0" izz="1e-05"/>
    </inertial>
  </link>

  <joint name="lidar_joint" type="fixed">
    <origin xyz="0.12 0 0.12" rpy="0 0 0"/>
    <parent link="base_link"/>
    <child link="lidar_link"/>
  </joint>

  <gazebo reference="lidar_link">
    <sensor name="gpu_lidar" type="gpu_lidar">
      <topic>/scan</topic>
      <update_rate>10.0</update_rate>
      <gz_frame_id>lidar_link</gz_frame_id>
      <ray>
        <scan>
          <horizontal>
            <samples>360</samples>
            <resolution>1</resolution>
            <min_angle>-3.14159</min_angle>
            <max_angle>3.14159</max_angle>
          </horizontal>
        </scan>
        <range>
          <min>0.12</min>
          <max>10.0</max>
          <resolution>0.01</resolution>
        </range>
      </ray>
      <always_on>true</always_on>
      <visualize>true</visualize>
    </sensor>
  </gazebo>

  <link name="imu_Link">
    <inertial>
      <origin xyz="1.38777878078145E-17 -1.64798730217798E-17 0.00117501372111883" rpy="0 0 0"/>
      <mass value="0.0283869958164694"/>
      <inertia
        ixx="1.7330818944512E-05"
        ixy="-2.18905765877172E-21"
        ixz="4.09211601360512E-22"
        iyy="2.3993887620163E-05"
        iyz="-1.50877743729675E-21"
        izz="3.82718524716327E-05"/>
    </inertial>

    <visual>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <mesh filename="package://all_wheel_description/meshes/imu_Link.STL"/>
      </geometry>
      <material name="">
        <color rgba="0.792156862745098 0.819607843137255 0.933333333333333 1"/>
      </material>
    </visual>

    <collision>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <mesh filename="package://all_wheel_description/meshes/imu_Link.STL"/>
      </geometry>
    </collision>
  </link>

  <joint name="imu_joint" type="fixed">
    <origin xyz="0 0 0.032" rpy="0 0 0"/>
    <parent link="base_link"/>
    <child link="imu_Link"/>
    <axis xyz="0 0 0"/>
  </joint>

  <link name="left_camera_link">
    <inertial>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <mass value="0.02"/>
      <inertia ixx="1e-05" ixy="0" ixz="0" iyy="1e-05" iyz="0" izz="1e-05"/>
    </inertial>
  </link>

  <joint name="left_camera_joint" type="fixed">
    <origin xyz="0.12 0.05 0.10" rpy="0 0 0"/>
    <parent link="base_link"/>
    <child link="left_camera_link"/>
  </joint>

  <link name="right_camera_link">
    <inertial>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <mass value="0.02"/>
      <inertia ixx="1e-05" ixy="0" ixz="0" iyy="1e-05" iyz="0" izz="1e-05"/>
    </inertial>
  </link>

  <joint name="right_camera_joint" type="fixed">
    <origin xyz="0.12 -0.05 0.10" rpy="0 0 0"/>
    <parent link="base_link"/>
    <child link="right_camera_link"/>
  </joint>
  <gazebo reference="imu_Link">
    <sensor name="imu_sensor" type="imu">
      <topic>/imu</topic>
      <update_rate>100.0</update_rate>
      <always_on>true</always_on>
    </sensor>
  </gazebo>

  <gazebo reference="left_camera_link">
    <sensor name="left_camera" type="camera">
      <gz_frame_id>left_camera_link</gz_frame_id>
      <pose>0 0 0 0 0 0</pose>
      <always_on>1</always_on>
      <update_rate>30</update_rate>
      <topic>/stereo/left/image</topic>
      <camera>
        <camera_info_topic>/stereo/left/camera_info</camera_info_topic>
        <horizontal_fov>1.047</horizontal_fov>
        <image>
          <width>640</width>
          <height>480</height>
        </image>
        <clip>
          <near>0.02</near>
          <far>30.0</far>
        </clip>
      </camera>
    </sensor>
  </gazebo>

  <gazebo reference="right_camera_link">
    <sensor name="right_camera" type="camera">
      <gz_frame_id>right_camera_link</gz_frame_id>
      <pose>0 0 0 0 0 0</pose>
      <always_on>1</always_on>
      <update_rate>30</update_rate>
      <topic>/stereo/right/image</topic>
      <camera>
        <camera_info_topic>/stereo/right/camera_info</camera_info_topic>
        <horizontal_fov>1.047</horizontal_fov>
        <image>
          <width>640</width>
          <height>480</height>
        </image>
        <clip>
          <near>0.02</near>
          <far>30.0</far>
        </clip>
      </camera>
    </sensor>
  </gazebo>

  <ros2_control name="IgnitionSystem" type="system">
    <hardware>
      <plugin>ign_ros2_control/IgnitionSystem</plugin>
    </hardware>
    <joint name="front_wheel_joint">
      <command_interface name="velocity"/>
      <state_interface name="position"/>
      <state_interface name="velocity"/>
    </joint>
    <joint name="right_wheel_joint">
      <command_interface name="velocity"/>
      <state_interface name="position"/>
      <state_interface name="velocity"/>
    </joint>
    <joint name="left_wheel_joint">
      <command_interface name="velocity"/>
      <state_interface name="position"/>
      <state_interface name="velocity"/>
    </joint>
  </ros2_control>

  <gazebo>
    <plugin filename="libignition-gazebo6-sensors-system.so"
      name="ignition::gazebo::systems::Sensors">
      <render_engine>ogre2</render_engine>
    </plugin>
    <plugin name="ignition::gazebo::systems::Imu" filename="libignition-gazebo6-imu-system.so" />
    <plugin filename="ign_ros2_control-system" name="ign_ros2_control::IgnitionROS2ControlPlugin">
      <parameters>$(find all_wheel_description)/config/ros2_controllers.yaml</parameters>
    </plugin>
  </gazebo>
</robot>
